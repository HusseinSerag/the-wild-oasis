import{A as f,J as k,W as j,_ as h,X as p,j as e,S as B,l as x,d as S}from"./index-C_TTsSQ5.js";import{u as q}from"./index.esm-Dgqcx6Li.js";import{F as y,a as u,I as l}from"./FormRow-CVLKJZJz.js";function L(){const d=f(),{mutate:i,isLoading:s}=k({mutationFn:t=>j(t),onSuccess:()=>{d.invalidateQueries({queryKey:["settings"]}),h.success("Settings edited successfully!")},onError:t=>h.error(t.message)});return{editSettings:i,isEditing:s}}function V(){const{isLoading:d,settings:i}=p(),{register:s,handleSubmit:t,getValues:m,formState:c}=q(),{errors:n}=c,{editSettings:b,isEditing:r}=L();if(d)return e.jsx(B,{});function o(a){b(a)}return e.jsxs(y,{children:[e.jsx(u,{label:"min-nights",error:n==null?void 0:n.minBookingLength,text:"Min. nights/booking",children:e.jsx(l,{type:"number",defaultValue:i==null?void 0:i.minBookingLength,id:"min-nights",disabled:r,...s("minBookingLength",{onBlur:t(o),required:"This field is required",validate:a=>{var g;return+a<+((g=m())==null?void 0:g.maxBookingLength)||"Minimum number of nights need to be less than maximum"},min:{value:3,message:"Minimum number of nights can't be less than 3!"}})})}),e.jsx(u,{text:"Max. nights/booking",error:n==null?void 0:n.maxBookingLength,label:"max-nights",children:e.jsx(l,{type:"number",id:"max-nights",disabled:r,defaultValue:i==null?void 0:i.maxBookingLength,...s("maxBookingLength",{onBlur:t(o),required:"This field is required",validate:a=>+a>+m().minBookingLength||"Value cannot be smaller than minimum booking length"})})}),e.jsx(u,{text:"Max. guests/booking",error:n==null?void 0:n.maxGuestPerBooking,label:"max-guests",children:e.jsx(l,{type:"number",disabled:r,id:"max-guests",defaultValue:i==null?void 0:i.maxGuestPerBooking,...s("maxGuestPerBooking",{onBlur:t(o),required:"This field is required",min:{value:1,message:"Value cannot be less than 1"}})})}),e.jsx(u,{text:"Breakfast price",error:n==null?void 0:n.breakfastPrice,label:"breakfast-price",children:e.jsx(l,{type:"number",id:"breakfast-price",disabled:r,defaultValue:i==null?void 0:i.breakfastPrice,...s("breakfastPrice",{onBlur:t(o),required:"This field is required",min:{value:1,message:"Value cannot be less than 1"}})})})]})}function P(){return e.jsxs(e.Fragment,{children:[e.jsx(x,{type:"horizontal",children:e.jsx(S,{as:"h1",children:"Hotel Settings"})}),e.jsx(x,{children:e.jsx(V,{})})]})}export{P as default};
