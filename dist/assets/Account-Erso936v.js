import{A as w,J as g,Y as U,_ as j,Z as N,j as e,l as u,d as y,K as o,$ as S}from"./index-DYqljV5M.js";import{u as b}from"./index.esm-Ckj6LrRu.js";import{F as P,a as n,I as l}from"./FormRow-Dw7DOcXP.js";import{F}from"./FileInput-3QPouIBO.js";function v(){const a=w(),{mutate:r,isPending:i}=g({mutationFn:U,onSuccess:()=>{a.invalidateQueries({queryKey:["user"]}),j.success("User information was updated successfully!")}});return{isPending:i,updateData:r}}function q(){const{user:a}=N(),{register:r,handleSubmit:i,reset:c,formState:m}=b(),{errors:s}=m,{updateData:p,isPending:d}=v();function f(t){const h=t.image[0];if(!h&&t.fullName===a.user_metadata.fullName){j("Nothing changed!");return}else(h||t.fullName!==a.user_metadata.fullName)&&p({avatarSrc:h,fullName:t.fullName},{onSuccess:()=>c()})}function x(t){}return e.jsxs(e.Fragment,{children:[e.jsx(u,{type:"horizontal",children:e.jsx(y,{as:"h2",children:"Update user's data"})}),e.jsx(u,{children:e.jsxs(P,{onSubmit:i(f,x),children:[e.jsx(n,{label:"email",text:"Email Address",children:e.jsx(l,{id:"email",type:"email",disabled:!0,value:a.email})}),e.jsx(n,{label:"fullName",text:"Full Name",error:s==null?void 0:s.fullName,children:e.jsx(l,{id:"fullName",type:"text",defaultValue:a.user_metadata.fullName,disabled:d,...r("fullName")})}),e.jsx(n,{label:"image",text:"Avatar",error:s==null?void 0:s.image,children:e.jsx(F,{id:"image",accept:"image/*",...r("image")})}),e.jsxs(n,{children:[e.jsx(o,{variation:"secondary",type:"reset",children:"Reset"}),e.jsx(o,{type:"submit",children:"Update Account"})]})]})})]})}function A(){const a=w(),{mutate:r,isPending:i}=g({mutationFn:S,onSuccess:()=>{a.invalidateQueries({queryKey:["user"]}),j.success("User's password was updated successfully!")}});return{isPending:i,updateUserPassword:r}}function R(){const{register:a,handleSubmit:r,reset:i,getValues:c,formState:m}=b(),{errors:s}=m,{updateUserPassword:p,isPending:d}=A();function f({password:t}){p({password:t},{onSuccess:()=>i()})}function x(t){}return e.jsxs(e.Fragment,{children:[e.jsx(u,{type:"horizontal",children:e.jsx(y,{as:"h2",children:"Update user's password"})}),e.jsx(u,{children:e.jsxs(P,{onSubmit:r(f,x),children:[e.jsx(n,{label:"password",text:"Password (min. 6 characters)",error:s==null?void 0:s.password,children:e.jsx(l,{id:"password",type:"password",disabled:d,...a("password",{required:"This field is required",minLength:{value:6,message:"Minimum password length is 6!"}})})}),e.jsx(n,{label:"confirmPassword",text:"Confirm Password",error:s==null?void 0:s.confirmPassword,children:e.jsx(l,{id:"confirmPassword",type:"password",disabled:d,...a("confirmPassword",{required:"This field is required",validate:t=>c().password===t?!0:"Passwords don't match!"})})}),e.jsxs(n,{children:[e.jsx(o,{variation:"secondary",type:"reset",children:"Reset"}),e.jsx(o,{type:"submit",children:"Update Account"})]})]})})]})}function I(){return e.jsxs(e.Fragment,{children:[e.jsx(q,{}),e.jsx(R,{})]})}export{I as default};
